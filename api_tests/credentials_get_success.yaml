# Test generated by RoostGPT for test credential-wallet-api using AI Type Open AI and AI Model gpt-4-1106-preview

# RoostTestHash=66f52a572f

config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 60
      arrivalRate: 1
  payload:
    path: "credentials_get_success.csv"
    fields:
      - "size"
      - "offset"
    skipHeader: true
  plugins:
    expect: {}

scenarios:
  - name: "Test GET /credentials with different query parameters"
    flow:
      - get:
          url: "/credentials"
          # Check the API with query parameter 'size'
          qs:
            size: "{{ size }}"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          log: "Testing valid 'size' query parameter with value {{ size }}"
          think: 1
          expect:
            - statusCode: 200
            - hasHeader: "api-version"
            - hasProperty: "total"
            - matchesJsonPath: "$.credentials[*].id"

      - get:
          url: "/credentials"
          # Check the API with query parameter 'offset'
          qs:
            offset: "{{ offset }}"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          log: "Testing valid 'offset' query parameter with value {{ offset }}"
          think: 1
          expect:
            - statusCode: 200
            - hasHeader: "api-version"
            - hasProperty: "total"
            - matchesJsonPath: "$.credentials[*].status"

      - get:
          url: "/credentials"
          # Check the API with both query parameters
          qs:
            size: "{{ size }}"
            offset: "{{ offset }}"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          log: "Testing valid 'size' and 'offset' query parameters with values {{ size }} and {{ offset }}"
          think: 1
          expect:
            - statusCode: 200
            - hasHeader: "api-version"
            - hasProperty: "total"
            - matchesJsonPath: "$.credentials[?(@.format=='jwt_vc_json')]"

      - get:
          url: "/credentials"
          # Check the API without query parameters
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          log: "Testing API endpoint without query parameters"
          think: 1
          expect:
            - statusCode: 200
            - hasHeader: "api-version"
            - hasProperty: "total"
            - matchesJsonPath: "$.credentials[*].credential"

