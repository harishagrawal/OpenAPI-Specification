# Test generated by RoostGPT for test credential-wallet-api using AI Type Open AI and AI Model gpt-4-1106-preview

# RoostTestHash=3122292ee3

config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 60
      arrivalRate: 1
  payload:
    path: "/mnt/data/login_post_others.csv"
    fields:
      - "client"
      - "email"
      - "otp"
    skipHeader: true
  plugins:
    expect: {}

scenarios:
  - name: "Login API negative test cases"
    flow:
      - log: "Testing login with missing 'email' field"
        # Expecting to fail because 'email' is required
        post:
          url: "/login"
          headers: 
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            Content-Type: "application/json"
          json:
            client: "{{ client }}"
            # missing 'email'
            otp: "{{ otp }}"
          expect:
            - statusCode: 400

      - think: 2

      - log: "Testing login with missing 'client' field"
        # Expecting to fail because 'client' is required
        post:
          url: "/login"
          headers: 
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            Content-Type: "application/json"
          json:
            email: "{{ email }}"
            # missing 'client'
            otp: "{{ otp }}"
          expect:
            - statusCode: 400

      - think: 2

      - log: "Testing login with invalid 'email' format"
        # Expecting to fail because 'email' format is invalid
        post:
          url: "/login"
          headers: 
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            Content-Type: "application/json"
          json:
            email: "invalid email format"
            client: "{{ client }}"
            otp: "{{ otp }}"
          expect:
            - statusCode: 400

      - think: 2

      - log: "Testing login with invalid 'otp' format (too short)"
        # Expecting to fail because 'otp' format is invalid (too short)
        post:
          url: "/login"
          headers: 
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            Content-Type: "application/json"
          json:
            email: "{{ email }}"
            client: "{{ client }}"
            otp: "123" # too short
          expect:
            - statusCode: 400

      - think: 2

      - log: "Testing login with invalid Authorization header"
        # Expecting to fail due to invalid Authorization header
        post:
          url: "/login"
          headers: 
            Authorization: "InvalidAuth" # invalid auth token
            Content-Type: "application/json"
          json:
            email: "{{ email }}"
            client: "{{ client }}"
            otp: "{{ otp }}"
          expect:
            - statusCode: 401

      - think: 2

      - log: "Testing login with malformed request body"
        # Expecting to fail because of the malformed request body
        post:
          url: "/login"
          headers: 
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            Content-Type: "application/json"
          json:
            invalid_field: "unexpected_data" # malformed body
          expect:
            - statusCode: 400

      - think: 2

      - log: "Testing login with correct payload but wrong endpoint (to trigger 404)"
        # Expecting to fail because of wrong endpoint
        post:
          url: "/invalidlogin" # invalid endpoint
          headers: 
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            Content-Type: "application/json"
          json:
            email: "{{ email }}"
            client: "{{ client }}"
            otp: "{{ otp }}"
          expect:
            - statusCode: 404

