# Test generated by RoostGPT for test credential-wallet-api using AI Type Open AI and AI Model gpt-4-1106-preview

# RoostTestHash=2758affb7e

config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 60
      arrivalRate: 1
  payload:
    path: "accounts_patch_others.csv"
    fields:
      - "invalidEmail"
      - "noEmail"
    skipHeader: true
  plugins:
    expect: {}

scenarios:
  - name: "Invalid and Failure Test Cases for /accounts API"
    flow:
      - think: 3
      - post:
          url: "/accounts"
          json:
            email: "{{ invalidEmail }}"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}" # valid authorization
          log: "Sending an invalid email to test the API's validation."
          # The request should fail on invalid email pattern (400 Bad Request)
          expect:
            - statusCode: 400
            - hasProperty: 'error'
            - hasProperty: 'description'
      - think: 5
      - post:
          url: "/accounts"
          json: {}
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}" # valid authorization
          log: "Sending empty payload to check if the email is enforced to be required."
          # The request should fail as 'email' field is required (400 Bad Request)
          expect:
            - statusCode: 400
            - hasProperty: 'error'
            - hasProperty: 'description'
      - think: 5
      - post:
          url: "/invalid_endpoint/accounts"
          json:
            email: "{{ invalidEmail }}"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}" # valid authorization
          log: "Using an invalid URL to trigger a failure case."
          # The request should fail due to invalid URL (Not Found error typical 404 status code)
          expect:
            - statusCode: 404
      - think: 5
      - post:
          url: "/accounts"
          json:
            email: "{{ invalidEmail }}"
          headers:
            Authorization: "InvalidToken"  # intentionally invalid authorization
          log: "Testing invalid authorization tokens"
          # The request should fail with an unauthorized error (typical 401 status code)
          expect:
            - statusCode: 401

